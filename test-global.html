<html>
  <head>
    <link rel="stylesheet" href="/fbm.css" type "text/css">
    <link rel="stylesheet" href="test.css" type "text/css">
    <style>
      .integers {
        margin: 4px;
        border: solid #2f2f2f;
      }
      .databox {
        margin: 8px;
      }
      .deepspan {
        display: inline-block;
        transform: scale(1, -1);
      }
      .nested {
        font-weight: bold;
        font-style: italic;
        font-size: larger;
      }
      .integer-editor {
        opacity: 0.5
      }
    </style>
  </head>
  <body>
    <div class="databox">
      <div>
        TESTING one 2 <span data-shows="plant_type">tree</span>
      </div>
      <select data-controls="plant_type">
        <option value="tree">tree</option>
        <option value="„Çø„É≥„Éù„Éù">„Çø„É≥„Éù„Éù</option>
        <option value="elm">elm</option>
        <option value="grass">grass</option>
      </select>
    </div>
    <div class="databox" data-scope="someData">
      Random ints, just for you: <span class="integers" id="rando" data-expands="randomInts" data-shows></span>
      <div>
        Next we have <span class="integer-editor" data-controls="repeatCount" contentEditable></span> melting faces:
        <span id="melties" data-expands="repeatCount">ü´†</span>
      </div>
      <div class="databox" data-scope="nested">
        In the nested scope, we have <span class="nested" data-shows="bird"></span>.
      </div>
      Add a 
      <select data-controls="currentInput">
        <option value="üêà">cat</option>
        <option value="üòæ">angry cat (aka "Bear")</option>
        <option value="üí©">poop</option>
        <option value="üêÑ">cow</option>
        <option value="üíÄ">skull</option>
        <option value="üëª">ghost</option>
      </select>
      <button onclick="someData.misc.push(someData.currentInput)">to misc</button> or
      <button onclick="someData.deep.deeper.push(someData.currentInput)">to a deeper structure</button>
      <div class="databox" data-scope="misc">
        <span id="mexpanding" data-expands data-shows></span>
      </div>
      <div class="databox" data-scope="deep">
        <div data-expands="deeper"><span data-shows class="deepspan"></span></div>
      </div>
    </div>
  </body>
  <script src="./uiulator.js"> </script>
  <script>
    plant_type = "tree";

    someData = {
        currentInput: "üíÄ",
        randomInts: [ ],
        _repeatCount: 23,
        set repeatCount(val) {
          val = Number.parseInt(val);
          if(!Number.isNaN(val)) {
            if(val < 1000) {
              this._repeatCount = val;
            } else {
              // ..because otherwise you can put in very large numbers
              // and destroy the page:
              this._repeatCount = 1000;
            }
          }
        },
        get repeatCount() {
          return this._repeatCount;
        },
        nested: {
            bird: "the eagle",
        },
        misc: [ ],
        deep: {
          deeper: [ ],
        }
    };
    for(let foo = 23; foo >= 0; foo--) {
        someData.randomInts.push(Math.floor(Math.random() * 8));
    }

// XXX try passing nothing;  also add options for update intervals
// so we don't have to setInterval
    const uil = uiulator(globalThis);
    window.setInterval(function() {
        uil.update();
    }, 250);
  </script>
</html>


